---
description:
globs:
alwaysApply: true
---
# Code Quality Tools (Obligatory)

- **All code must be formatted with Black, type-checked with mypy, and linted with ruff**
    - Run Black, mypy, and ruff before committing.
    - Example:
      ```bash
      black .
      mypy .
      ruff .
      ```
    - Configuration: see `configs/linting/config.yaml` and `pyproject.toml`.
    - Motivation: Ensures code consistency, readability, and early bug detection.

# Core Code Principles

- **Clean and Organized Code:** Structure code logically and readably.
- **DRY (Don't Repeat Yourself):** Avoid code duplication.

# Code Style and Documentation

- **PEP 8:** Follow PEP 8 for naming, spacing, and layout.
- **Line Length:** Prefer â‰¤79 chars, but Black's formatting is accepted.
- **Docstrings and Comments:** Use brief, English docstrings for all modules, classes, and functions. Only comment non-obvious logic.

# Modularity and Organization

- **Modular Design:** Small, focused, reusable modules.
- **File Size:** Prefer 200-300 lines; max 400 with justification.
- **Code Location:** Place code in appropriate directories; no one-off scripts in `src/`.
- **UTF-8 Encoding:** All code files must use UTF-8.

# Reliability

- **Test Coverage:** Include unit/integration tests for major functionality.
- **Environment Data Separation:** No mock data in production code.
- **Robustness:** Add basic error handling as needed.

# Dependency and Configuration

- **Conda for dependencies:** Use `environment.yml`.
- **Hydra for configuration:** All parameters via Hydra/YAML.
- **.env for sensitive config:** Never hardcode secrets.

# References

- See also: `project-structure.mdc`, `structural-guide.mdc`, `configs/linting/config.yaml`, `pyproject.toml`.

## Quick References
- [general-context.mdc](mdc:.cursor/guides/general-context.mdc): Project Proposal & Technical Discussion
- [project-structure.mdc](mdc:.cursor/guides/project-structure.mdc): Directory Tree
- [structural-guide.mdc](mdc:.cursor/guides/structural-guide.mdc): Structural Guide. Minimal structural outline
- [development-guide.mdc](mdc:.cursor/guides/development-guide.mdc): outlines a suggested step-by-step process for developing the pavement crack segmentation project.
- [glossary.mdc](mdc:.cursor/guides/glossary.mdc): Glossary of Key Terms